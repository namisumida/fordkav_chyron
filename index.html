<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Scrollama Demo: Sticky JS</title>
	<meta name="description" content="Scrollama Demo: Sticky JS">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link type="text/css" href="css/main.css" rel="stylesheet"/>


</head>

<body>
	<section id="intro">
		<div class="opener-title">
			<p id="opener-title">How cable networks covered Ford and Kavanaugh's hearings</p>
			<p id="opener-subtitle">An analysis of chyrons run during the two hearings on<br>MSNBC, CNN, and the Fox News Channel.</p>
		</div>
		<div class="body-container-first">
			<div class="prose-first" id="prose-first-1">You know those captions that appear on the lower part of your TV screen when you’re watching cable news?</div>
			<div class="prose-first" id="prose-first-2">These captions, also known as “lower-third chyrons,” are oftentimes treated like headlines of an article - quick summaries of the news and topic at-hand. And while many of these captions are unbiased overviews of the news topic, they can still be a window into how breaking news stories are reported by cable news networks.</div>
			<div class="prose-first" id="prose-first-3">On September 16, 2018, MSNBC, CNN and Fox News covered the nearly six hours of Christine Blasey Ford’s and Brett Kavanaugh’s hearings. While all three provided similar live video coverage, the captions that came alongside them differed in who was quoted, what was emphasized, and what was not emphasized.</div>
		</div>
		<div class="body-container-rect">
			<div class="body-container-brandtext" width="800" height="120">
				<p class="brand-text" id="brand-text-msnbc">MSNBC</p>
				<p class="brand-text" id="brand-text-cnn">CNN</p>
				<p class="brand-text" id="brand-text-fox">Fox</p>
			</div>
			<svg id="svg-rect-first" width="800" height="200">
				<rect class="rect-first" id="msnbc_rect" width="220", height="120"/>
				<rect class="rect-first" id="cnn_rect" width="220", height="120"/>
				<rect class="rect-first" id="fox_rect" width="220", height="120"/>
			</svg>
			<div class="body-container-chyron" width="800" height="120">
				<p class="chyron-text-first" id="chyron-text-msnbc">KAVANAUGH: I WILL NOT WITHDRAW FROM THIS PROCESS</p>
				<p class="chyron-text-first" id="chyron-text-cnn">CHRISTINE BLASEY FORD ABOUT TO TESTIFY ON KAVANAUGH ALLEGATIONS</p>
				<p class="chyron-text-first" id="chyron-text-fox">SEN. GRASSLEY (R-IA) DELIVERS OPENING STATEMENTS</p>
			</div>
		</div>
	</section>
	<section id='scroll'>
		<div class='scroll__graphic sticky'>
			<svg id="scroll-svg" width="100%" height="100%"></svg>
		</div>
		<div class='scroll__text'>
			<div class='step' data-step='1'>
				<div id="circle"></div>
			</div>
			<div class='step' data-step='2'>
				<div id="circle"></div>
			</div>
			<div class='step' data-step='3'>
				<div id="circle"></div>
			</div>
			<div class='step' data-step='4'>
				<div id="circle"></div>
			</div>
			<div class='step' data-step='5'>
				<div id="circle"></div>
			</div>
			<div class='step' data-step='6'>
				<div id="circle"></div>
			</div>
			<div class='step' data-step='7'>
				<div id="circle"></div>
			</div>
			<div class='step' data-step='8'>
				<div id="circle"></div>
			</div>
			<div class='step' data-step='9'>
				<div id="circle"></div>
			</div>
		</div>
	</section>
	<section id='outro'>
		<div class="container-svg">
			<svg id="tool-svg" width="100%" height="100%"></svg>
			<input id="slider" class="slider" type="range" min="0" max="8" step="1" value="0" orient="horizontal"></input>
		</div>
	</section>
	<div class='debug'></div>

	<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
	<script src='js/stickyfill.min.js'></script>
	<script src='https://unpkg.com/intersection-observer@0.5.0/intersection-observer.js'></script>
	<script src='js/scrollama.min.js'></script>
	<script src='js/build.js'></script>
	<script src='js/exit_screens.js'></script>
	<script src='js/enter_screens.js'></script>
	<script src='js/build_tool.js'></script>

	<script>
		// using d3 for convenience
		var container = d3.select('#scroll');
		var graphic = container.select('.scroll__graphic');
		var text = container.select('.scroll__text');
		var step = text.selectAll('.step');
		// initialize the scrollama
		var scroller = scrollama();
		// generic window resize listener event
		function handleResize() {
			// 1. update height of step elements
			var stepHeight = Math.floor(window.innerHeight * 0.75);
			step.style('height', stepHeight + 'px');
			// 2. update width/height of graphic element
			var bodyWidth = d3.select('body').node().offsetWidth;
			var graphicMargin = 16 * 4;
			var textWidth = text.node().offsetWidth;
			var graphicWidth = container.node().offsetWidth - textWidth - graphicMargin;
			var graphicHeight = Math.floor(window.innerHeight / 2)
			var graphicMarginTop = Math.floor(graphicHeight / 2)
			graphic
				.style('width', graphicWidth + 'px')
				.style('height', graphicHeight + 'px')
				.style('top', graphicMarginTop + 'px');
			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}
		// scrollama event handlers
		function handleStepEnter(response) {
			// response = { element, direction, index }
			if (response.index==0) {
				enter_screen3();
			}
			else if (response.index==1) {
				enter_screen4();
			}
			else if (response.index==2) {
				enter_screen5();
			}
			else if (response.index==3) {
				enter_screen6();
			}
			else if (response.index==4) {
				enter_screen7();
			}
			else if (response.index==5) {
				enter_screen8();
			}
			else if (response.index==6) {
				enter_screen9();
			}
			else if (response.index==7) {
				enter_screen10();
			}
			else if (response.index==8) {
				enter_screen11();
			}
		}
		function handleContainerEnter(response) {
			// response = { direction }
		}
		function handleContainerExit(response) {
			// response = { direction }
		}
		function setupStickyfill() {
			d3.selectAll('.sticky').each(function () {
				Stickyfill.add(this);
			});
		}
		function init() {
			setupStickyfill();
			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();
			// 2. setup the scroller passing options
			// this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller.setup({
				container: '#scroll',
				graphic: '.scroll__graphic',
				text: '.scroll__text',
				step: '.scroll__text .step',
				debug: true,
				offset: 0.33,
			})
				.onStepEnter(handleStepEnter)
				.onContainerEnter(handleContainerEnter)
				.onContainerExit(handleContainerExit);
			// setup resize event
			window.addEventListener('resize', handleResize);
		}
		// kick things off
		init();
	</script>
</body>

</html>
